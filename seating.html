<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Seating Arrangement ‚Äî Shout It!</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: linear-gradient(180deg, #0F0F1A 0%, #1A1A2E 100%);
      color: #FFFFFF;
      display: flex;
      min-height: 100vh;
      align-items: center;
      justify-content: center;
      padding: 20px;
    }
    .panel {
      width: 720px;
      max-width: 95%;
      background: linear-gradient(135deg, #16213E, rgba(22, 33, 62, 0.8));
      padding: 30px;
      border-radius: 16px;
      border: 2px solid #2A2A40;
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.6);
    }
    h2 {
      font-size: 1.5rem;
      font-weight: 800;
      background: linear-gradient(90deg, #F39C12, #E74C3C, #F39C12);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 20px;
      letter-spacing: 1px;
    }
    .controls {
      display: flex;
      gap: 12px;
      align-items: center;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }
    .controls label {
      color: #B8B8C8;
      font-weight: 500;
    }
    input[type=number] {
      width: 70px;
      padding: 10px 12px;
      border-radius: 10px;
      border: 2px solid #2A2A40;
      background: #0F0F1A;
      color: #FFFFFF;
      font-family: inherit;
      font-size: 1rem;
      font-weight: 600;
    }
    input[type=number]:focus {
      outline: none;
      border-color: #E74C3C;
      box-shadow: 0 0 10px rgba(231, 76, 60, 0.3);
    }
    button {
      padding: 10px 16px;
      border-radius: 10px;
      border: none;
      background: linear-gradient(180deg, #E74C3C, rgba(231, 76, 60, 0.8));
      color: white;
      cursor: pointer;
      font-family: inherit;
      font-weight: 700;
      font-size: 0.9rem;
      transition: all 0.3s;
      box-shadow: 0 4px 12px rgba(231, 76, 60, 0.4);
    }
    button:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 16px rgba(231, 76, 60, 0.5);
    }
    button:active {
      transform: translateY(0);
    }
    #stop {
      background: linear-gradient(180deg, #2A2A40, #1C1C2E);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
    }
    #stop:hover {
      box-shadow: 0 6px 16px rgba(0, 0, 0, 0.5);
    }
    #play {
      background: linear-gradient(180deg, #2ECC71, rgba(46, 204, 113, 0.8));
      box-shadow: 0 4px 12px rgba(46, 204, 113, 0.4);
    }
    #play:hover {
      box-shadow: 0 6px 16px rgba(46, 204, 113, 0.5);
    }
    .circle {
      position: relative;
      width: 100%;
      height: 480px;
      margin: 0 auto;
    }
    .seat {
      position: absolute;
      width: 120px;
      height: 44px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: rgba(255, 255, 255, 0.05);
      border: 2px solid rgba(255, 255, 255, 0.1);
      border-radius: 22px;
      transform-origin: 50% 50%;
      font-weight: 700;
      font-size: 1.1rem;
      color: #fff;
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.4);
      cursor: pointer;
      transition: transform 0.2s, box-shadow 0.2s;
    }
    .seat:hover {
      transform: translate(-50%, -50%) scale(1.05) !important;
    }
    .seat.teamA {
      background: linear-gradient(135deg, #E74C3C, #c0392b);
      box-shadow: 0 4px 16px rgba(231, 76, 60, 0.5);
      border-color: rgba(255, 255, 255, 0.2);
    }
    .seat.teamB {
      background: linear-gradient(135deg, #3498DB, #2980b9);
      box-shadow: 0 4px 16px rgba(52, 152, 219, 0.5);
      border-color: rgba(255, 255, 255, 0.2);
    }
    .seat.teamC {
      background: linear-gradient(135deg, #2ECC71, #27ae60);
      box-shadow: 0 4px 16px rgba(46, 204, 113, 0.5);
      border-color: rgba(255, 255, 255, 0.2);
    }
    .legend {
      display: flex;
      gap: 20px;
      margin-top: 16px;
      align-items: center;
      justify-content: center;
      flex-wrap: wrap;
    }
    .legend > div {
      display: flex;
      align-items: center;
      gap: 8px;
      color: #B8B8C8;
      font-weight: 500;
    }
    .dot {
      width: 14px;
      height: 14px;
      border-radius: 4px;
      display: inline-block;
    }
    .note {
      color: #8888A0;
      font-size: 0.9rem;
      margin-top: 16px;
      text-align: center;
      line-height: 1.5;
    }
    .back-link {
      display: inline-block;
      margin-top: 20px;
      color: #E74C3C;
      text-decoration: none;
      font-weight: 600;
      transition: color 0.3s;
    }
    .back-link:hover {
      color: #F39C12;
    }
    footer {
      text-align: center;
      margin-top: 24px;
      padding-top: 20px;
      border-top: 2px solid #2A2A40;
    }
  </style>
</head>
<body>
  <div class="panel">
    <h2>üé≠ Round Table Seating</h2>
    <div class="controls">
      <label>Players per team:</label>
      <input id="players" type="number" min="1" value="3">
      <button id="render">Render</button>
      <button id="play">‚ñ∂ Play</button>
      <button id="stop">‚ñ† Stop</button>
    </div>

    <div class="circle" id="circle"></div>
    <div class="legend">
      <div><span class="dot" style="background:linear-gradient(135deg,#E74C3C,#c0392b)"></span> Team A</div>
      <div><span class="dot" style="background:linear-gradient(135deg,#3498DB,#2980b9)"></span> Team B</div>
      <div><span class="dot" style="background:linear-gradient(135deg,#2ECC71,#27ae60)"></span> Team C</div>
    </div>
    <p class="note">Seating order: A1 ‚Üí B1 ‚Üí C1 ‚Üí A2 ‚Üí B2 ‚Üí C2 ‚Üí ... ‚Üí Ax ‚Üí Bx ‚Üí Cx ‚Üí back to A1<br>Click any seat to highlight it, or press Play to animate.</p>

    <footer>
      <a href="support.html" class="back-link">‚Üê Back to Support</a>
    </footer>
  </div>

  <script>
    const circle = document.getElementById('circle');
    const renderBtn = document.getElementById('render');
    const playBtn = document.getElementById('play');
    const stopBtn = document.getElementById('stop');
    let raf = null;
    let playIntervalId = null;
    let currentIndex = -1;
    let stepMs = 1000;

    function buildOrder(x, teams=['A','B','C']){
      const order = [];
      for(let i=1;i<=x;i++) for(const t of teams) order.push(t+i);
      return order;
    }

    function render(x){
      circle.innerHTML='';
      const order = buildOrder(x);
      const center = { x: circle.clientWidth/2, y: circle.clientHeight/2 };
      const n = order.length;

      const baseSeatWidth = 120;
      const minSeatWidth = 60;
      const gap = 8;

      const containerRadius = Math.min(circle.clientWidth, circle.clientHeight)/2;
      const minRadius = containerRadius - 140;
      const maxRadius = containerRadius - 40;

      let requiredRadius = ((baseSeatWidth + gap) * n) / (2 * Math.PI);

      let radius = Math.max(minRadius, Math.min(requiredRadius, maxRadius));
      let seatWidth = baseSeatWidth;
      if (requiredRadius > maxRadius) {
        seatWidth = Math.max(minSeatWidth, Math.floor((2 * Math.PI * maxRadius) / n - gap));
        requiredRadius = ((seatWidth + gap) * n) / (2 * Math.PI);
        radius = Math.max(minRadius, Math.min(requiredRadius, maxRadius));
      }

      for(let i=0;i<n;i++){
        const theta = (i / n) * Math.PI * 2 - Math.PI/2;
        const el = document.createElement('div');
        el.className = 'seat';
        const team = order[i][0];
        if(team==='A') el.classList.add('teamA');
        if(team==='B') el.classList.add('teamB');
        if(team==='C') el.classList.add('teamC');

        el.style.width = seatWidth + 'px';
        el.style.left = (center.x + radius*Math.cos(theta)) + 'px';
        el.style.top = (center.y + radius*Math.sin(theta)) + 'px';
        const baseTransform = 'translate(-50%,-50%)';
        el.dataset.baseTransform = baseTransform;
        el.style.transform = baseTransform;
        el.textContent = order[i];
        el.addEventListener('click', () => {
          stopPlaying();
          highlightSeat(i);
          currentIndex = i;
        });
        circle.appendChild(el);
      }
    }

    renderBtn.addEventListener('click', ()=>{
      const x = Math.max(1, parseInt(document.getElementById('players').value)||1);
      render(x);
    });

    function highlightSeat(idx){
      const seats = circle.querySelectorAll('.seat');
      if(seats.length===0) return;
      seats.forEach((s,i)=>{
        s.style.boxShadow = '';
        s.style.border = '';
        s.style.zIndex = '';
        s.style.transform = s.dataset.baseTransform || s.style.transform;
      });
      const el = seats[idx % seats.length];
      if(!el) return;
      el.style.boxShadow = '0 0 30px rgba(243, 156, 18, 0.7), 0 0 60px rgba(231, 76, 60, 0.5)';
      el.style.border = '3px solid #F39C12';
      el.style.zIndex = 10;
      const base = el.dataset.baseTransform || el.style.transform;
      el.style.transform = base + ' scale(1.15)';
    }

    function stopPlaying(){
      if(playIntervalId){ clearInterval(playIntervalId); playIntervalId = null; }
      const seats = circle.querySelectorAll('.seat');
      seats.forEach(s=>{
        s.style.boxShadow = '';
        s.style.border = '';
        s.style.zIndex = '';
        s.style.transform = s.dataset.baseTransform || s.style.transform;
      });
      currentIndex = -1;
    }

    playBtn.addEventListener('click', ()=>{
      if(playIntervalId) return;
      const seats = circle.querySelectorAll('.seat');
      if(seats.length===0) return;
      currentIndex = (currentIndex + 1) % seats.length;
      highlightSeat(currentIndex);
      playIntervalId = setInterval(()=>{
        currentIndex = (currentIndex + 1) % seats.length;
        highlightSeat(currentIndex);
      }, stepMs);
    });

    stopBtn.addEventListener('click', ()=>{ stopPlaying(); });

    let currentX = 3;
    function initialRender(){ render(currentX); }
    window.addEventListener('resize', () => initialRender());
    renderBtn.addEventListener('click', ()=>{
      const x = Math.max(1, parseInt(document.getElementById('players').value)||1);
      currentX = x;
      stopPlaying();
      render(x);
    });
    render(currentX);
  </script>
</body>
</html>
